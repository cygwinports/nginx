--- origsrc/nginx-1.4.3/auto/lib/perl/conf	2013-10-08 07:07:14.000000000 -0500
+++ src/nginx-1.4.3/auto/lib/perl/conf	2013-10-13 11:17:23.435781500 -0500
@@ -52,8 +52,7 @@ if test -n "$NGX_PERL_VER"; then
         ngx_perl_ldopts=`echo $ngx_perl_ldopts | sed 's/ -pthread//'`
     fi
 
-    CORE_LINK="$CORE_LINK $ngx_perl_ldopts"
-    LINK_DEPS="$LINK_DEPS $NGX_OBJS/$ngx_perl_module"
+    CORE_LINK="$CORE_LINK $ngx_perl_ldopts -Wl,--out-implib,$NGX_OBJS/libnginx.a"
 
     if test -n "$NGX_PERL_MODULES"; then
         have=NGX_PERL_MODULES value="(u_char *) \"$NGX_PERL_MODULES\""
--- origsrc/nginx-1.4.3/auto/lib/perl/make	2013-10-08 07:07:14.000000000 -0500
+++ src/nginx-1.4.3/auto/lib/perl/make	2013-10-13 11:19:45.788923600 -0500
@@ -10,6 +10,7 @@ cat << END
 
 $NGX_OBJS/src/http/modules/perl/blib/arch/auto/nginx/nginx.$ngx_perl_dlext: \\
 		\$(CORE_DEPS) \$(HTTP_DEPS) \\
+		$NGX_OBJS/nginx \\
 		src/http/modules/perl/ngx_http_perl_module.h \\
 		$NGX_OBJS/src/http/modules/perl/Makefile
 	cd $NGX_OBJS/src/http/modules/perl && \$(MAKE)
@@ -35,6 +36,8 @@ $NGX_OBJS/src/http/modules/perl/Makefile
 			NGX_DEPS="\$(CORE_DEPS) \$(HTTP_DEPS)" \\
 		$NGX_PERL Makefile.PL \\
 			LIB=$NGX_PERL_MODULES \\
+			INSTALLDIRS=vendor \\
+			OPTIMIZE="\$(CFLAGS)" \\
 			INSTALLSITEMAN3DIR=$NGX_PERL_MODULES_MAN
 
 END
--- origsrc/nginx-1.4.3/src/http/modules/perl/Makefile.PL	2013-10-08 07:07:14.000000000 -0500
+++ src/nginx-1.4.3/src/http/modules/perl/Makefile.PL	2013-10-13 11:21:09.915735400 -0500
@@ -16,6 +16,7 @@ WriteMakefile(
     CCFLAGS           => "$ENV{NGX_PM_CFLAGS}",
     OPTIMIZE          => '-O',
 
+    LIBS              => "-L../../../.. -lnginx",
     INC               => join(" ", map {
                              m#^/# ? "-I $_" : "-I ../../../../../$_"
                          } (split /\s+/, $ENV{NGX_INCS})),
